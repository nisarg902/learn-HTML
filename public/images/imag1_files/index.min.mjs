!function(){"use strict";const t={activeClass:"TK-Nav-Overlay--Active"};class e{constructor(e,n){this.options=Object.assign({},t,n),this.element=e,this.activeClass=this.options.activeClass,this.hidden=!0}show(){this.hidden&&this.element&&(this.element.classList.add(this.activeClass),this.hidden=!1)}hide(){!this.hidden&&this.element&&(this.element.classList.remove(this.activeClass),this.hidden=!0)}addEventListener(t,e,n=!1){this.element&&this.element.addEventListener(t,e,n)}}const n="transition"in document.documentElement.style,s=t=>"function"==typeof t,o={hover:!1,click:!1,activeClass:"TK-Dropdown--Active",beforeOpenHook:()=>{},beforeCloseHook:()=>{}};class i{constructor(t,e){t&&(this.element=t,this.options=Object.assign({},o,e),this.closed=!0,this.running=!1,this.parent=this.options.parent||t.parentElement,this.button=this.options.button||this.parent.firstElementChild,this.beforeOpenHook=this.options.beforeOpenHook,this.beforeCloseHook=this.options.beforeCloseHook,this.init())}run(){if(!n)return;const{transition:t}=window.getComputedStyle(this.element,null);if("none"===t.split(" ")[0])return void(this.running=!1);this.running=!0;const e=()=>{this.running=!1,this.element.removeEventListener("transitionend",e,!1)};this.element.addEventListener("transitionend",e,!1)}open(){this.closed&&(s(this.beforeOpenHook)&&this.beforeOpenHook(),this.run(),this.element.classList.add(this.options.activeClass),this.closed=!1,document.addEventListener("keydown",this.bind("closeOnEscape"),!1))}close(){this.closed||(s(this.beforeCloseHook)&&this.beforeCloseHook(),this.run(),this.element.classList.remove(this.options.activeClass),this.closed=!0,document.removeEventListener("keydown",this.bind("closeOnEscape"),!1))}closeOnEscape(t){27===t.keyCode&&this.close()}toggle(){window.requestAnimationFrame((()=>{this.closed?this.open():this.close()}))}contains(t){return this.element.contains(t)}associate(t){let e=this.contains(t);return t===this.button&&(e=!0),e}bind(t){const e=`${t}_`;return s(this[e])||(this[e]=this[t].bind(this)),this[e]}on(t){"tk-click"===t&&this.button.addEventListener("click",this.bind("toggle"),!1),"tk-hover"===t&&this.options.hover&&(this.button.addEventListener("focus",this.bind("open"),!1),this.parent.addEventListener("mouseenter",this.bind("open"),!1),this.parent.addEventListener("mouseleave",this.bind("close"),!1)),"tk-before-open-hook"===t&&(this.beforeOpenHook=this.options.beforeOpenHook),"tk-before-close-hook"===t&&(this.beforeCloseHook=this.options.beforeCloseHook)}off(t){"tk-click"===t&&this.button.removeEventListener("click",this.bind("toggle"),!1),"tk-hover"===t&&this.options.hover&&(this.button.removeEventListener("focus",this.bind("open"),!1),this.parent.removeEventListener("mouseenter",this.bind("open"),!1),this.parent.removeEventListener("mouseleave",this.bind("close"),!1)),"tk-before-open-hook"===t&&(this.beforeOpenHook=null),"tk-before-close-hook"===t&&(this.beforeCloseHook=null)}deface(){if(!this.options.hover)return;const t=t=>t.preventDefault(),e=()=>{this.on("tk-click"),this.button.removeEventListener("click",t,!1)},n=()=>{this.off("tk-click"),this.button.addEventListener("click",t,!1)};this.button.addEventListener("mouseenter",(()=>{this.running&&n(),requestAnimationFrame((()=>{n(),e()}))}),!1)}init(){this.options.click&&this.on("tk-click"),this.options.hover&&(this.on("tk-hover"),this.deface())}}class r{constructor(t,e){Array.isArray(t)&&(this.dropdowns=t.map((t=>t instanceof i?t:new i(t,e))))}close(){this.dropdowns.forEach((t=>{t.close()}))}contains(t){let e=!1;return this.dropdowns.forEach((n=>{n.contains(t)&&(e=!0)})),e}associate(t){let e=!1;return this.dropdowns.forEach((n=>{n.associate(t)&&(e=!0)})),e}on(t){this.dropdowns.forEach((e=>{e.on(t)}))}off(t){this.dropdowns.forEach((e=>{e.off(t)}))}}function a(t=[]){return Promise.allSettled?Promise.allSettled(t):Promise.all(t).catch((()=>Promise.resolve()))}const c=!!window.fetch,h=!!window.Promise,l={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"};class u{constructor(t=u.getHostname(),e=l){this.defaults=Object.assign({},e),this.url=u.getApiUrl(t),this.hostname=t,this.isStore=t.includes("store.progress.com"),this.online=navigator.onLine,this.available=!!(this.url&&this.online&&h&&c),this.rejection=new Error("Not allowed domain || offline || no browser support")}static json(t){if(t.ok)return t.json();throw new Error(t.statusText)}static getHostname(){return window.location.hostname.toLowerCase()}static getApiUrl(t=u.getHostname()){let e="";if(["www.telerik.com","docs.telerik.com","demos.telerik.com"].includes(t))e="https://www.telerik.com/account/api";else if(["www.progress.com","store.progress.com"].includes(t))e="https://store.progress.com/api";else{const n=t.split("."),s=n[0],o=n[1],i=n[2],r=s.length,a=s.startsWith("www")&&r>=3&&r<=6&&"telerik"===o&&"com"===i,c=s.startsWith("www")&&r>=3&&r<=6&&"progress"===o&&"com"===i,h=s.startsWith("store",3)&&8===r&&"progress"===o&&"com"===i;if(a&&(e=`https://${s}.telerik.com/account/api`),c){e=`https://${t.substring(3,6)}store.progress.com/api`}if(h){e=`https://${t.substring(0,3)}store.progress.com/api`}}return e}initAsync(){return this.available?this.getEnvironment().then((t=>{const e=window.location.href,n=encodeURIComponent(encodeURIComponent(e));return this.env=t,this.env.signoutUrl=`${t.telerikWebsiteUrl}${t.signoutBaseUrl}${n}`,t})):Promise.reject(this.rejection)}getEnvironment(){if(!this.available)return Promise.reject(this.rejection);const t=this.isStore?`${this.url}/v1/environments/current`:`${this.url}/v2/environments/current`;return fetch(t,this.defaults).then(u.json)}getCurrentUserEmail(){if(!this.available)return Promise.reject(this.rejection);const t=`${this.url}/v1/users/current/email`;return fetch(t,this.defaults).then(u.json)}tryGetCurrentUserEmail(){return this.getCurrentUserEmail().then((t=>t||Promise.reject(new Error("User is not logged in"))))}getUserAvatarUrl(t){if(!this.available)return Promise.reject(this.rejection);if(!t)return Promise.reject(new Error("No email provided"));const e=encodeURIComponent(t),n=`${this.url}/v1/users/${e}/avatarurl`;return fetch(n,this.defaults).then(u.json)}getLoggedInState(){if(!this.available)return Promise.reject(this.rejection);const t=`${this.url}/v1/users/current/logged`;return fetch(t,this.defaults).then(u.json)}getBasicProfile(){if(!this.available)return Promise.reject(this.rejection);const t=`${this.url}/v1/users/current/basicprofile`;return fetch(t,this.defaults).then(u.json)}getShoppingCartItemsCount(t){if(!this.available)return Promise.reject(this.rejection);if(!t)return Promise.reject(new Error("Shopping cart session id is required"));const e=`${this.url}/v3/shoppingcarts/${t}/items/count`;return fetch(e,this.defaults).then(u.json)}getExpiringProductsCount(t){if(!this.available)return Promise.reject(this.rejection);if(!t)return Promise.reject(new Error("User email is required"));const e=encodeURIComponent(t),n=`${this.url}/v2/purchaseoptions/${e}/renewalsandupgrades/stats`;return fetch(n,this.defaults).then(u.json).then((t=>Number(t.expiring)))}getMySkuCategories(){if(!this.available)return Promise.reject(this.rejection);const t=`${this.url}/v2/stockkeepingunits/mine/categories`;return fetch(t,this.defaults).then(u.json)}getVirtualClassRoomSupport(){if(!this.available)return Promise.reject(this.rejection);const t=`${this.url}/v1/lms/hasaccess`;return fetch(t,this.defaults).then(u.json)}}const d="TK-Item--Selected",p=(t,e)=>Array.from(e.querySelectorAll(t));function m(t){p(`.${d}`,t).forEach((t=>t.classList.remove(d)));const{href:e,pathname:n,search:s,hostname:o}=window.location;p("a",t).forEach((t=>{const i=t.hasAttribute("data-match-exact-path"),r=t.hasAttribute("data-match-contains-search"),a=t.hasAttribute("data-match-starts-with-path"),c=t.hasAttribute("data-match-pattern");if(i&&r?n===t.pathname&&s.indexOf(t.search)>=0&&t.classList.add(d):i?n===t.pathname&&t.classList.add(d):a&&e.startsWith(t.href)&&t.classList.add(d),c){new RegExp(t.getAttribute("data-pattern")).test(o+n)&&t.classList.add(d)}}));const i=p(`.${d}`,t),r=p(".TK-Menu-Item-Link.TK-Item--Selected, .TK-Aside-Menu-Link.TK-Item--Selected",t);if(r.length>1){const t=r.find((t=>t.hasAttribute("data-match-exact-path")));t?r.filter((e=>e!==t)).forEach((t=>t.classList.remove(d))):r.slice(1).forEach((t=>t.classList.remove(d)))}if(0===r.length){let t=!1;i.forEach((e=>{if(!t){const n=e.closest(".TK-Dropdown:not(.TK-Dash)");if(n){const e=n.parentElement.querySelector(".TK-Menu-Item-Button, .TK-Aside-Menu-Button");e&&e.classList.add(d),t=!0}}}))}}class f{constructor(){this.api=new u,this.hiddenClassName="TK-dn",this.logoutLink=document.querySelector("#js-tlrk-nav-log-out"),this.avatarImage=document.querySelector("#js-tlrk-nav-avatar-image"),this.authenticatedContainer=document.querySelector("#js-tlrk-nav-auth-container"),this.notAuthenticatedContainer=document.querySelector("#js-tlrk-nav-not-auth-container"),this.supportMenu=document.querySelector("#js-tlrk-nav-ya-support-menu"),this.productsMenuContainer=document.querySelector("#js-tlrk-nav-ya-products-menu"),this.productsMenu=document.querySelector("#js-tlrk-nav-ya-products-menu .TK-Dropdown-List"),this.isYourAccount=!(!this.supportMenu||!this.productsMenu),this.isClientSideAuth=!(!this.authenticatedContainer||!this.notAuthenticatedContainer),this.setSignoutUrl=this.setSignoutUrl.bind(this)}populateProfileMenu(t){if(!t||!this.api.env||!this.isClientSideAuth)return Promise.resolve(!1);const{signoutUrl:e}=this.api.env;return this.api.getUserAvatarUrl(t).then((t=>{t&&(this.avatarImage&&this.avatarImage.setAttribute("src",t),this.logoutLink&&this.logoutLink.setAttribute("href",e),this.authenticatedContainer&&this.authenticatedContainer.classList.remove(this.hiddenClassName),this.notAuthenticatedContainer&&this.notAuthenticatedContainer.classList.add(this.hiddenClassName))}))}populateSupportMenu(t){return t&&this.isYourAccount?this.api.getVirtualClassRoomSupport().then((t=>{if(t){const t='<li><a href="/account/support/virtual-classroom" class="TK-Dropdown-Link" data-match-exact-path>On-Demand Product Training</li>';this.supportMenu.classList.add("TK-Dropdown--230"),this.supportMenu.insertAdjacentHTML("beforeend",t)}})):Promise.resolve(!1)}populateProductsMenu(t){return t&&this.isYourAccount?this.api.getMySkuCategories().then((t=>{let e="";e=t.length?t.map((t=>{let e;return"Main"===t.type&&(e=`/account/your-products?skucid=${t.id}`),"Extension"===t.type&&(e=`/account/your-products/extensions?skucid=${t.id}`),`<li><a href="${e}" class="TK-Dropdown-List-Link" data-match-exact-path data-match-contains-search>${t.name}</a></li>`})).join(""):'\n          <li>\n            <a href="/purchase.aspx" class="TK-Dropdown-List-Link TK-Nav-Ya-No-Products" data-match-exact-path>\n              <span>There are no purchased products</span>\n              <span><b class="TK-vam">Buy Products</b><svg class="TK-vam" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span>\n              <span>Purchase Individual Products Or DevCraft Value Bundles</span>\n            </a>\n          </li>\n        '.trim(),t.length>18&&this.productsMenuContainer.classList.add("TK-Dropdown--Full-Split"),this.productsMenu.innerHTML=e})):Promise.resolve(!1)}setSignoutUrl(){if(!this.api.env||!this.logoutLink)return;const t=window.location.href,e=encodeURIComponent(encodeURIComponent(t)),{telerikWebsiteUrl:n,signoutBaseUrl:s}=this.api.env,o=`${n}${s}${e}`;this.logoutLink.setAttribute("href",o)}}function v(t=null,e=!1){const n=new CustomEvent("tk-account-ready",{detail:{email:t,isYourAccount:e}});document.dispatchEvent(n)}function k(t){if(function(){const t=document.createElement("div");return["","-webkit-","-moz-","-ms-"].some((e=>{try{t.style.position=`${e}sticky`}catch(t){}return""!==t.style.position}))}())return;const e=t=>{const e=window.StickyElement.create(t);return document.addEventListener("tk-update-sticky",(()=>{e.reset(),e.update()})),e};new Promise((t=>{"loading"!==document.readyState?t():document.addEventListener("readystatechange",(()=>{"interactive"===document.readyState&&t()}))})).then((()=>{window.StickyElement?e(t):new Promise(((t,e)=>{const n=document.createElement("script");n.src="https://d6vtbcy3ong79.cloudfront.net/sticky-element/2.0.14/index.js",n.async=!0,n.addEventListener("load",t),n.addEventListener("error",e),document.body.appendChild(n)})).then((()=>e(t))).catch((t=>console.error(`StickyElement script did not load. ${t.message}`)))}))}const g=!(!("ontouchstart"in window)&&!navigator.maxTouchPoints),w=t=>t.preventDefault(),b=()=>Math.max(document.documentElement.clientWidth,window.innerWidth||0)<=1240,L=document.querySelector("#js-tlrk-nav"),E=t=>L&&L.querySelector(t),j=t=>L&&Array.from(L.querySelectorAll(t));function y(){if(!L)return;const t=j("a, button"),n=j(".TK-Dropdown"),s=E("#js-tlrk-nav-dash"),o=E("#js-tlrk-nav-drawer"),a=E("#js-tlrk-nav-drawer-button"),c=E("#js-tlrk-nav-overlay"),h=new e(c),l=new r(n,{click:!0,hover:!0,beforeOpenHook:()=>{o&&d.close(),l.close(),b()&&h.show()},beforeCloseHook:()=>{b()&&h.hide()}}),u=new r(l.dropdowns.filter((t=>o&&o.contains(t.element)))),d=new i(o,{click:!0,hover:!1,button:a,activeClass:"TK-Drawer--Active",beforeOpenHook:()=>{l.close(),h.show(),u.off("tk-hover"),u.off("tk-before-open-hook"),u.off("tk-before-close-hook")},beforeCloseHook:()=>{h.hide(),u.on("tk-hover"),u.on("tk-before-open-hook"),u.on("tk-before-close-hook")}});function p(t=128){g||setTimeout((()=>l.close()),t)}function f(){b()?l.off("tk-hover"):l.on("tk-hover")}g&&l.dropdowns.map((t=>t.button)).forEach((t=>t.addEventListener("click",w,!1))),t.filter((t=>t!==h.element)).filter((t=>t!==d.button)).filter((t=>!l.associate(t))).forEach((t=>t.addEventListener("focus",p,!1))),h.addEventListener("click",(()=>{d.close(),l.close()})),f(),window.addEventListener("resize",f,!1),window.addEventListener("orientationchange",(()=>{d.close(),l.close()}),!1),document.addEventListener("ng-location-changed",p,!1),s&&o&&(m(s),m(o))}function C(){let t=!1;const{fonts:e}=document,n=document.querySelector("#js-tlrk-nav-metric"),s=document.querySelector("#js-tlrk-nav-styles"),o=t=>!t.classList.contains("is-loading"),i=()=>{t||(requestAnimationFrame((()=>{requestAnimationFrame((()=>{L.classList.remove("TK-Nav--Loading"),L.classList.add("TK-Nav--Loaded")}))})),t=!0)};if(o(n)&&o(s))return i();if(e){if("loaded"===e.status)return i();const t=["15px Metric-Light","15px Metric-Medium","15px Metric-Regular","15px Metric-Semibold"],n=t.map((t=>e.check(t))),s=t.map((t=>e.load(t)));if(n.every(Boolean))return i();const o=a(s);return Promise.race?Promise.race([o,e.ready]).then(i).catch(i):o.then(i)}const r=t=>new Promise(((e,n)=>{o(t)?e():(t.addEventListener("load",e),t.addEventListener("error",n),setTimeout((()=>o(t)?e():n()),512))}));return a([r(n),r(s)]).then(i)}window.TLRK_NAV_INITIALIZED||(function(){const t=new f;if(!t.api.available)return v(null,t.isYourAccount);if(!t.isClientSideAuth)return v(null,t.isYourAccount);const e=document.querySelector("#js-tlrk-nav-dash"),n=document.querySelector("#js-tlrk-nav-drawer"),s=t.api.initAsync().then((()=>t.api.getCurrentUserEmail())),o=()=>{e&&n&&(m(e),m(n))},i=[s.then((e=>t.populateProfileMenu(e))),s.then((e=>t.populateSupportMenu(e))),s.then((e=>t.populateProductsMenu(e)))],r=()=>s.then((e=>v(e,t.isYourAccount)));Promise.all(i).then((()=>{o(),r()})).catch((()=>{o(),r()})),document.addEventListener("ng-location-changed",o),document.addEventListener("ng-location-changed",t.setSignoutUrl)}(),y(),requestAnimationFrame(C),k({top:0,fixClass:"TK-Bar--Sticky",selector:"#js-tlrk-nav .TK-Bar",breakpoint:1240}),function(){const t=E("#js-tlrk-skip-link"),e=document.createElement("div");e.classList.add("TK-Nav-Skipper"),e.tabIndex=0,t.addEventListener("click",(n=>{L.after(e),t.blur(),e.focus(),e.remove(),n.preventDefault()}))}(),window.TLRK_NAV_INITIALIZED=!0)}();
//# sourceMappingURL=index.min.mjs.map
